# 🔐 安全部署指南

## 概述

为了提高安全性，测试网部署现在支持命令行安全输入私钥，避免将私钥写入代码或配置文件中。

## 🚀 部署方式

### 方式一：命令行安全输入（推荐）

```bash
npm run deploy:testnet
```

执行后会提示您安全输入私钥：
- 私钥输入时显示为星号 `*`
- 支持退格键删除
- 按回车确认输入
- 支持 Ctrl+C 取消

### 方式二：环境变量（可选）

如果您希望使用环境变量，可以：

```bash
export DEPLOY_PRIVATE_KEY=your_private_key_here
npm run deploy:testnet
```

或者使用一次性环境变量：

```bash
DEPLOY_PRIVATE_KEY=your_private_key_here npm run deploy:testnet
```

## 🔒 安全特性

### 1. 私钥输入保护
- ✅ 输入时显示星号，不显示实际字符
- ✅ 私钥不会保存到任何文件
- ✅ 私钥不会出现在命令历史中
- ✅ 支持退格键和取消操作

### 2. 私钥验证
- ✅ 自动检测并移除 `0x` 前缀
- ✅ 验证私钥长度（64字符）
- ✅ 验证私钥格式有效性

### 3. 余额检查
- ✅ 部署前检查账户余额
- ✅ 余额不足时提供获取测试币指导
- ✅ 允许用户选择是否继续部署

## 📋 完整部署流程

### 1. 编译合约
```bash
npm run compile
```

### 2. 部署到测试网
```bash
npm run deploy:testnet
```

按提示输入私钥，系统会：
- 验证私钥格式
- 检查账户余额
- 部署合约
- 测试合约功能
- 保存部署信息

### 3. 更新前端配置
```bash
npm run update-address
```

### 4. 启动前端服务
```bash
npm run dev
```

## 🛡️ 安全最佳实践

### ✅ 推荐做法
- 使用命令行安全输入私钥
- 定期更换测试网私钥
- 不要在测试网账户存放大量资产
- 使用专门的测试账户

### ❌ 避免做法
- 不要将私钥写入代码
- 不要将私钥提交到版本控制
- 不要在不安全的环境下输入私钥
- 不要使用主网私钥进行测试

## 🔧 故障排除

### 私钥输入问题
```bash
# 如果输入界面异常，可以重置终端
reset
npm run deploy:testnet
```

### 网络连接问题
```bash
# 检查网络配置
npx hardhat console --network monad_testnet
```

### 余额不足
1. 确认账户地址正确
2. 访问Monad测试网水龙头获取代币
3. 联系Monad社区获取帮助

## 📞 支持

如果遇到问题：
1. 检查私钥格式是否正确
2. 确认网络连接正常
3. 验证账户余额充足
4. 查看详细错误信息

---

🔐 **安全提醒**: 请始终保护好您的私钥，不要在不安全的环境下进行部署操作。 